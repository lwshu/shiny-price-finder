utils:::menuInstallPkgs()
library BTYD
library (BTYD)
q()
install.packages("ISLR")
install.packages("tree")
install.packages("ggplot2")
install.package('MASS')
install.packages('MASS')
install.packages('boot')
install.packages('leap')
install.packages('leaps')
install.packages('pls')
install.packages('splines')
install.packages('locfit')
install.packages('gam')
install.packages('akima')
install.packages('randomForest')
install.packages('e1071')
install.packages('ROCR')
library("openxlsx")
mydf <- read.xlsx("PriceExecution_Report (14).xlsx", sheet = 1, startRow = 1, colNames = TRUE)
head(mydf)
overprice=mydf[mydf$Cur.Mode.Price>mydf$Rec.Price]
cat("\014")
head(mydf)
overprice=mydf[mydf$Cur.Mode.Price>mydf$Rec.Price,]
View(overprice)
blocked=mydf[mydf$Status=='BLOCKED',]
overprice=mydf[mydf$Cur.Mode.Price>mydf$Rec.Price,c("SHC Item#","Div-Item","Blkd Rsn","Rec Price"]
overprice=mydf[mydf$Cur.Mode.Price>mydf$Rec.Price,c("SHC Item#","Div-Item","Blkd Rsn","Rec Price")]
head(mydf)
overprice=mydf[mydf$Cur.Mode.Price>mydf$Rec.Price,c("SHC.Item#","Div-Item","Blkd.Rsn","Rec.Price")]
View(overprice)
View(mydf)
table(mydf$Blkd.Rsn)
table(overprice$Blkd.Rsn)
data.frame(table(overprice$Blkd.Rsn))
op<-mydf[mydf$Cur.Mode.Price>mydf$Rec.Price,c("SHC.Item#","Blkd.Rsn")]
op_unique<-op[!duplicated(op),]
data.frame(table(op$Blkd.Rsn))
cat("\014")
rm(list=ls(all=TRUE))
setwd("C:/Users/lshu0/Documents")
library("openxlsx")
mydf <- read.xlsx("PriceExecution_Report (14).xlsx", sheet = 1, startRow = 1, colNames = TRUE)
head(mydf)
## CHECK WHETHER BLOCKED
blocked<-mydf[mydf$Status=='BLOCKED',]
view(blocked)
## CHECK WHETER HIGHER THAN REC
overprice<-mydf[mydf$Cur.Mode.Price>mydf$Rec.Price,c("SHC.Item#","Div-Item","Blkd.Rsn","Rec.Price")]
View(overprice)
## GROUP BY BLKD.RSN
op<-mydf[mydf$Cur.Mode.Price>mydf$Rec.Price,c("SHC.Item#","Blkd.Rsn")]
op_unique<-op[!duplicated(op),]
count<-data.frame(table(op$Blkd.Rsn))
View(count)
colnames(count)<-c("SHC.Item#","Blkd.Rsn")
View(count)
View(blocked)
View(op_unique)
View(count)
View(blocked)
View(overprice)
View(count)
View(overprice)
cat("\014")
rm(list=ls(all=TRUE))
setwd("C:/Users/lshu0/Documents")
library("openxlsx")
librart("WriteXLS")
mydf <- read.xlsx("PriceExecution_Report (14).xlsx", sheet = 1, startRow = 1, colNames = TRUE)
head(mydf)
blocked<-mydf[mydf$Status=='BLOCKED',]
View(blocked)
WriteXLS(blocked,"Blocked Item.xls",row.names=TRUE)
library("WriteXLS")
install.packages("WriteXLS")
("WriteXLS")
library("WriteXLS")
WriteXLS(blocked,"Blocked Item.xls",row.names=TRUE)
write.xlsx(blocked,"Blocked Item.xlsx",colNames=TRUE)
install.packages("xlsx")
write.xlsx(blocked,"Blocked Item.xlsx",colNames=TRUE)
write.csv(blocked,"Blocked Item.csv",colNames=TRUE)
write.csv(blocked,"Blocked Item.csv")
overprice<-mydf[mydf$Cur.Mode.Price>mydf$Rec.Price,c("SHC.Item#","Div-Item","Blkd.Rsn","Rec.Price")]
write.csv(overprice,"Overpriced Item.csv")
View(overprice)
View(overprice)
write.csv(blocked,"Blocked Item.csv",row.names=FALSE)
write.csv(overprice,"Overpriced Item.csv",row.names=FALSE)
op<-mydf[mydf$Cur.Mode.Price>mydf$Rec.Price,c("SHC.Item#","Blkd.Rsn")]
op_unique<-op[!duplicated(op),]
count<-data.frame(table(op$Blkd.Rsn))
colnames(count)<-c("Blkd.Rsn","Rsn COunt")
write.csv(count,"Block reason count.csv",row.names=FALSE)
cat("\014")
rm(list=ls(all=TRUE))
setwd("C:/Users/lshu0/Documents/11302015 Apriori Algorithm")
setwd("C:/Users/lshu0/Documents/11302015 Apriori Algorithm")
install.packages("arules")
library("arules")
data("Groceries")
Groceries
View(Groceries)
View(Groceries)
G_data<-as.matrix(Groceries)
rules <- apriori(Groceries, parameter = list(support = .001))
rules
inspect(head(sort(rules, by = "lift"), 3))
install.packages("mdb")
install.packages("mdb-tools")
install.packages("RODBC")
rddall <- odbcConnectAccess("n:/products/Allparks/Roads_RDDALL.mdb")
rddall <- odbcConnectAccess("C:/Users/lshu0/Documents/daily work/SQLAExport-60days.mdb")
library(RODBC)
rddall <- odbcConnectAccess("C:/Users/lshu0/Documents/daily work/SQLAExport-60days.mdb")
install.packages("rJava")
install.packages("RJDBC",dep=TRUE)
install.packages("RHive")
install.packages("RH2")
install.packages("RImpala")
library(RImpala)
library(RImpala)
rimpala.init(libs="/impala/jars/")
rimpala.init(libs="C:\Users\lshu0\Documents\daily work\12-18-2015_step 3 pivot table and lift")
rimpala.init(libs="C:/Users/lshu0/Documents/daily work/12-18-2015_step 3 pivot table and lift")
library(RJDBC)
install.packages("RHive")
install.packages("rJava")
library(rJava)
if(!require(installr)) {
install.packages("installr"); require(installr)}
install.packages("rJava")
install.packages("RJDBC",dep=TRUE)
library("DBI")
library(shiny)
runApp(C:\Users\lshu0\Documents\daily work\1-5-2016 data check interface)
runApp(C:/Users/lshu0/Documents/daily work/1-5-2016 data check interface)
library(shiny)
runApp("C:/Users/lshu0/Documents/daily work/1-5-2016 data check interface")
library(rsconnect)
devtools::install_github('rstudio/rsconnect')
library(shiny)
runApp("C:/Users/lshu0/Documents/daily work/1-5-2016 data check interface")
library(shiny)
runApp("C:/Users/lshu0/Documents/daily work/1-5-2016 data check interface")
library(rsconnect)
shinyapps::setAccountInfo(name='lshu-sears',
token='CCD47EAA4C7CFD929E7028077555C5B6',
secret='woajblQu4/ZQKiBK7s0PXc8G4XBlj5wcj6rLptR1')
library(shiny)
deployApp("C:/Users/lshu0/Documents/daily work/1-5-2016 data check interface")
deployApp("C:/Users/lshu0/Documents/daily work/1-5-2016 data check interface")
runApp("C:/Users/lshu0/Documents/daily work/1-5-2016 data check interface")
runApp("C:/Users/lshu0/Documents/daily work/1-5-2016 data check interface")
runApp("C:/Users/lshu0/Documents/daily work/1-5-2016 data check interface")
library(shiny)
runApp("C:/Users/lshu0/Documents/shiny")
install.packages(gdata)
install.packages(gdata)
install.packages("gdata")
library("shiny")
runApp("")
runApp("C:/Users/lshu0/Documents/shiny")
install.packages('devtools')
devtools::install_github('rstudio/shinyapps')
library(rsconnect)
rsconnect::setAccountInfo(name='lshu-sears',
token='CCD47EAA4C7CFD929E7028077555C5B6',
secret='woajblQu4/ZQKiBK7s0PXc8G4XBlj5wcj6rLptR1')
runApp("C:/Users/lshu0/Documents/shiny")
library(shiny)
runApp("C:/Users/lshu0/Documents/shiny")
runApp("C:/Users/lshu0/Documents/shiny")
str_dt<-"2015-12-09"
end_dt<-"2015-12-26"
div_no<-26
item_no<-88732
store_no<-c(1333,3976,1594,2888,2432)
library(data.table)
mydf <- fread("query_result.csv", header = T, sep = ',')
setwd("C:/Users/lshu0/Documents/shiny")
library(data.table)
mydf <- fread("query_result.csv", header = T, sep = ',')
mydf<-as.data.frame(mydf)
cols<-c(1:4,7:10)
mydf<-mydf[,cols]
mydf<-mydf[with(mydf,order(store_id,div_no,item_no,load_dt)),]
View(mydf)
mydf<-within(mydf, div_item<- paste(div_no, item_no, sep="_"))
str_dt<-as.Date(str_dt,"%Y-%m-%d")
end_dt<-as.Date(end_dt,"%Y-%m-%d")
div_item<-paste(toString(div_no),toString(item_no),sep="_")
library(reshape)
dat<-mydf[,c(1,9,8,5,7)]
View(dat)
dat<-data.frame(dat$store_id,dat$div_item,as.Date(dat$load_dt,"%m/%d/%Y"),dat$promo_prc,dat$price_source)
colnames(dat) <- c("store_id","div_item", "load_dt","promo_prc","price_src")
dat<-mydf[,c(1,9,8,5,7)]
colnames(dat) <- c("store_id","div_item", "load_dt","promo_prc","price_src")
dat<-dat[dat$store_id %in% store_no & dat$div_item %in% div_item,]
price_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,4)]
src_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,5)]
price_tbl<-cast(price_tbl, load_dt ~ store_id,mean)
View(price_tbl)
price_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,4)]
src_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,5)]
View(price_tbl)
price_tbl<-cast(price_tbl, load_dt ~ store_id,mean)
price_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,4)]
src_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,5)]
View(price_tbl)
dat<-data.frame(dat$store_id,dat$div_item,as.Date(dat$load_dt,"%m/%d/%Y"),dat$promo_prc,dat$price_source)
dat<-mydf[,c(1,9,8,5,7)]
dat<-data.frame(dat$store_id,dat$div_item,as.Date(dat$load_dt,"%m/%d/%Y"),dat$promo_prc,dat$price_source)
colnames(dat) <- c("store_id","div_item", "load_dt","promo_prc","price_src")
dat<-dat[dat$store_id %in% store_no & dat$div_item %in% div_item,]
price_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,4)]
src_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,5)]
price_tbl<-cast(price_tbl, load_dt ~ store_id,mean)
dat<-mydf[,c(1,9,8,5,7)]
mydf <- fread("query_result.csv", header = T, sep = ',')
mydf<-as.data.frame(mydf)
cols<-c(1:4,7:10)
mydf<-mydf[,cols]
#mydf<-mydf[with(mydf,order(store_id,div_no,item_no,load_dt)),]
mydf<-within(mydf, div_item<- paste(div_no, item_no, sep="_"))
str_dt<-as.Date(str_dt,"%Y-%m-%d")
end_dt<-as.Date(end_dt,"%Y-%m-%d")
div_item<-paste(toString(div_no),toString(item_no),sep="_")
library(reshape)
dat<-mydf[,c(1,9,8,5,7)]
dat<-data.frame(dat$store_id,dat$div_item,as.Date(dat$load_dt,"%m/%d/%Y"),dat$promo_prc,dat$price_source)
colnames(dat) <- c("store_id","div_item", "load_dt","promo_prc","price_src")
#dat<-dat[dat$store_id %in% store_no & dat$div_item %in% div_item,]
price_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,4)]
src_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,5)]
mydf <- fread("query_result.csv", header = T, sep = ',')
mydf<-as.data.frame(mydf)
str_dt<-"2015-12-09"
end_dt<-"2015-12-26"
div_no<-26
item_no<-88732
store_no<-c1333,3976,1594,2888,2432)
str_dt<-"2015-12-09"
end_dt<-"2015-12-26"
div_no<-26
item_no<-88732
store_no<-c(1333,3976,1594,2888,2432)
library(data.table)
mydf <- fread("query_result.csv", header = T, sep = ',')
mydf<-as.data.frame(mydf)
cols<-c(1:4,7:10)
mydf<-mydf[,cols]
mydf<-within(mydf, div_item<- paste(div_no, item_no, sep="_"))
str_dt<-as.Date(str_dt,"%Y-%m-%d")
end_dt<-as.Date(end_dt,"%Y-%m-%d")
div_item<-paste(toString(div_no),toString(item_no),sep="_")
library(reshape)
dat<-mydf[,c(1,9,8,5,7)]
dat<-data.frame(dat$store_id,dat$div_item,as.Date(dat$load_dt,"%m/%d/%Y"),dat$promo_prc,dat$price_source)
colnames(dat) <- c("store_id","div_item", "load_dt","promo_prc","price_src")
price_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,4)]
View(price_tbl)
dat<-mydf[,c(1,9,8,5,7)]
View(dat)
#dat<-data.frame(dat$store_id,dat$div_item,as.Date(dat$load_dt,"%m/%d/%Y"),dat$promo_prc,dat$price_source)
colnames(dat) <- c("store_id","div_item", "load_dt","promo_prc","price_src")
dat<-dat[dat$store_id %in% store_no & dat$div_item %in% div_item,]
View(dat)
price_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,4)]
src_tbl<-dat[with(dat,order(store_id,load_dt)),c(1,3,5)]
View(price_tbl)
price_tbl$promo_prc[1]
typeof(price_tbl$promo_prc[1])
price_tbl$promo_prc<-as.numeric(price_tbl$promo_prc)
typeof(price_tbl$promo_prc[1])
price_tbl<-cast(price_tbl, load_dt ~ store_id,mean)
View(price_tbl)
library(gdata)
map<-mapLevels(x=src_tbl$price_src)
src_tbl$price_src<-as.integer(src_tbl$price_src)
src_tbl<-cast(src_tbl, load_dt ~ store_id,max)
mapLevels(x=src_tbl[,-1]) <- map
View(src_tbl)
str_dt<-"2015-12-09"
end_dt<-"2015-12-26"
div_no<-26
item_no<-88732
store_no<-c(1333,3976,1594,2888,2432)
library(data.table)
mydf <- fread("query_result.csv", header = T, sep = ',')
mydf<-as.data.frame(mydf)
cols<-c(1:4,7:10)
mydf<-mydf[,cols]
#mydf<-mydf[with(mydf,order(store_id,div_no,item_no,load_dt)),]
mydf<-within(mydf, div_item<- paste(div_no, item_no, sep="_"))
str_dt<-as.Date(str_dt,"%Y-%m-%d")
end_dt<-as.Date(end_dt,"%Y-%m-%d")
div_item<-paste(toString(div_no),toString(item_no),sep="_")
library(reshape)
dat<-mydf[,c(1,9,8,5,7)]
#dat<-data.frame(dat$store_id,dat$div_item,as.Date(dat$load_dt,"%m/%d/%Y"),dat$promo_prc,dat$price_source)
colnames(dat) <- c("store_id","div_item", "load_dt","promo_prc","price_src")
dat<-dat[dat$store_id %in% store_no & dat$div_item %in% div_item,]
price_tbl<-dat[,c(1,3,4)]#with(dat,order(store_id,load_dt))
src_tbl<-dat[,c(1,3,5)]#with(dat,order(store_id,load_dt))
View(price_tbl)
price_tbl$promo_prc<-as.numeric(price_tbl$promo_prc)
price_tbl<-cast(price_tbl, load_dt ~ store_id,mean)
library(gdata)
map<-mapLevels(x=src_tbl$price_src)
src_tbl$price_src<-as.integer(src_tbl$price_src)
View(src_tbl)
src_tbl<-dat[,c(1,3,5)]#with(dat,order(store_id,load_dt))
src_tbl$price_src<-factor(src_tbl$price_src)
map<-mapLevels(x=src_tbl$price_src)
src_tbl$price_src<-as.integer(src_tbl$price_src)
View(src_tbl)
src_tbl<-cast(src_tbl, load_dt ~ store_id,max)
mapLevels(x=src_tbl[,-1]) <- map
View(src_tbl)
price_tbl<-price_tbl[price_tbl$load_dt>=str_dt & price_tbl$load_dt<=end_dt,]
src_tbl<-src_tbl[src_tbl$load_dt>=str_dt & src_tbl$load_dt<=end_dt,]
View(price_tbl)
View(src_tbl)
runApp("C:/Users/lshu0/Documents/shiny")
output <- melt(price_tbl ,  id.vars = 'date', variable.name = 'store_id')
colnames(output) <- c("load_date","price","store_id")
p<-  ggplot(data=output,aes(x=load_date,y=price,label=price,group=1))+
geom_line()+geom_point(shape = 1)+
facet_grid(store_id ~ .,scales = "free")+geom_text(hjust=0,vjust=-1,size=4,angle = 25)
print(p)
runApp("C:/Users/lshu0/Documents/shiny")
runApp("C:/Users/lshu0/Documents/shiny")
